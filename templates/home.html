<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CryptoTaxBuddy</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
    rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
    crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
</head>
<body>
    <div class="mx-auto col-5" style="margin-top: 7rem;">
        <h1 class="text-center mb-3 text-secondary">Crypto Tax Buddy</h1><br>
        <form id="myForm" action="#" method="post" autocomplete="off" onsubmit="return myFunction()">
            <input id="flat" class="form-control" type="datetime-local" placeholder="Select Date and Time in UTC" name="datetime" required><br>
            <input id="check" class="form-control" placeholder="Enter Trading Pair (ex. BTC-USD, ETH-BTC)" type="text" name="pair" required><br><br><br>
            <div class="text-center">
                <input class="btn btn-primary" type="submit" name="Submit">
            </div>
        </form>
    </div>



    <footer class="footer mt-auto py-3 fixed-bottom">
        <div class="text-center container">
            <span class="text-muted">Made by Marcello Hwang @ 2022</span>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="jquery-3.5.1.min.js"></script>
    <script>
        config = {
            enableTime: true,
            dateFormat: "Y-m-d H:i",
            maxDate: new Date().fp_incr(-1),
            minDate: "2015-01",
            time_24hr: true,
            minuteIncrement: 1,
            allowInput: true
        }
        flatpickr("#flat", config);
    </script>
    <script>
        function myFunction() {
          let x = document.getElementById("check").value.toUpperCase().trim();
          if(x === "") {
                alert("Please enter a trading pair");
                return false;
          }

          let pairs = {{ pair_list|tojson|safe}};
          if (!pairs.includes(x)) {
                alert("Invalid trading pair");
                return false;
          } else {
                document.getElementById("check").value = document.getElementById("check").value.trim();
                document.getElementById("myForm").submit();
          }
        }
    </script>

</body>
</html>




